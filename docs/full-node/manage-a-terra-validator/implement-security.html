<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Implement security practices &mdash; Terra Classic Docs  documentation</title>
      <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/tabs.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/panels-bootstrap.5fd3999ee7762ccc51105388f4a9d115.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/custom.css" type="text/css" />
    <link rel="shortcut icon" href="../../../_static/docs_favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script src="../../../_static/clipboard.min.js"></script>
        <script src="../../../_static/copybutton.js"></script>
        <script src="../../../_static/design-tabs.js"></script>
        <script src="../../../_static/custom.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Set up an oracle feeder" href="set-up-oracle-feeder.html" />
    <link rel="prev" title="Validator FAQ" href="faq.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../../index.html">
            <img src="../../../_static/docs_logo.svg" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../learn/README.html">Learn</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../develop/README.html">Develop</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../README.html">Full node</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../run-a-full-terra-node/README.html">Run a full Terra node </a></li>
<li class="toctree-l2 current"><a class="reference internal" href="README.html">Manage a validator </a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="README.html#additional-resources">Additional resources</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="court-delegations.html">Court delegations</a></li>
<li class="toctree-l4"><a class="reference internal" href="faq.html">Validator FAQ</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">Implement security practices</a></li>
<li class="toctree-l4"><a class="reference internal" href="set-up-oracle-feeder.html">Set up an oracle feeder</a></li>
<li class="toctree-l4"><a class="reference internal" href="set-up-validator.html">Register a validator</a></li>
<li class="toctree-l4"><a class="reference internal" href="set-up-validator.html#restore-a-validator">Restore a validator</a></li>
<li class="toctree-l4"><a class="reference internal" href="troubleshoot-validator-problems.html">Troubleshoot validator problems</a></li>
<li class="toctree-l4"><a class="reference internal" href="restore.html">Restore a validator</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reference/README.html">Node reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../develop/endpoints.html">RPC and LCD endpoints</a></li>
<li class="toctree-l2"><a class="reference internal" href="../resources.html">Full node resources</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../ecosystem/README.html">Ecosystem</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../spacecamp/README.html">Hackathon resources </a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Terra Classic Docs</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home"></a></li>
          <li class="breadcrumb-item"><a href="../README.html">Full node</a></li>
          <li class="breadcrumb-item"><a href="README.html">Manage a validator </a></li>
      <li class="breadcrumb-item active">Implement security practices</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../_sources/docs/full-node/manage-a-terra-validator/implement-security.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="tex2jax_ignore mathjax_ignore section" id="implement-security-practices">
<h1>Implement security practices<a class="headerlink" href="#implement-security-practices" title="Permalink to this headline"></a></h1>
<p>Each validator candidate is encouraged to run its operations independently. Diverse individual setups increase the resilience of the network.</p>
<div class="section" id="manage-digital-keys-with-hsm">
<h2>Manage digital keys with HSM<a class="headerlink" href="#manage-digital-keys-with-hsm" title="Permalink to this headline"></a></h2>
<p>Key management is mission critical for validators. If an attacker gains access to a validator’s private key, it puts the validator’s entire delegated stake at risk. Hardware security modules are an important strategy for mitigating this risk.</p>
<p>Consider implementing this <a class="reference external" href="https://github.com/iqlusioninc/tmkms">key-management method</a> by Iqulusion.</p>
</div>
<div class="section" id="defend-against-ddos-attacks">
<h2>Defend against DDoS attacks<a class="headerlink" href="#defend-against-ddos-attacks" title="Permalink to this headline"></a></h2>
<p>Validators are responsible for ensuring that the network can defend against denial of service attacks.</p>
<p>Validators can mitigate these attacks by carefully structuring their network topology in a sentry node architecture.</p>
<p>Validator nodes should only connect to full nodes they trust. They can be run by the same validator or other validators they know. A validator node will typically run in a data center. Most data centers provide direct links to major cloud providers. A validator can use these links to connect to sentry nodes in the cloud. This shifts the burden of denial-of-service from the validator’s node directly to its sentry nodes. This may require new sentry nodes to be spun up or activated to mitigate attacks on existing ones.</p>
<p>Sentry nodes can be quickly spun up or used to change IP addresses. Because links to the sentry nodes are in private IP space, an internet based attack can’t disturb them directly. This will ensure a validator’s block proposals and votes always make it to the rest of the network.</p>
<p>Learn more about <a class="reference external" href="https://forum.cosmos.network/t/sentry-node-architecture-overview/454">sentry-node architecture</a>.</p>
<ol class="arabic">
<li><p>For validators nodes, edit the <code class="docutils literal notranslate"><span class="pre">config.toml</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Comma separated list of nodes to keep persistent connections to</span>
<span class="c1"># Do not add private peers to this list if you don&#39;t want them advertised</span>
<span class="nv">persistent_peers</span> <span class="o">=</span> <span class="s2">&quot;comma separated list of sentry node addresses&quot;</span>

<span class="c1"># Set true to enable the peer-exchange reactor</span>
<span class="nv">pex</span> <span class="o">=</span> <span class="nb">false</span>
</pre></div>
</div>
</li>
<li><p>For sentry nodes, edit the <code class="docutils literal notranslate"><span class="pre">config.toml</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Comma separated list of nodes to keep persistent connections to</span>
<span class="c1"># Do not add private peers to this list if you don&#39;t want them advertised</span>
<span class="nv">persistent_peers</span> <span class="o">=</span> <span class="s2">&quot;validator node address&quot;</span>

<span class="c1"># Comma separated list of peer IDs to keep private (will not be gossiped to other peers)</span>
<span class="nv">private_peer_ids</span> <span class="o">=</span> <span class="s2">&quot;nodeid of the validator&quot;</span>
</pre></div>
</div>
</li>
</ol>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>A node address has the following format: <code class="docutils literal notranslate"><span class="pre">nodeid&#64;ip:port</span></code>, you can get the nodeid by running <code class="docutils literal notranslate"><span class="pre">terrad</span> <span class="pre">tendermint</span> <span class="pre">show-node-id</span></code>, the default port is 26656.</p>
</div>
</div>
<div class="section" id="environment-variables">
<h2>Environment Variables<a class="headerlink" href="#environment-variables" title="Permalink to this headline"></a></h2>
<p>By default, uppercase environment variables with the following prefixes will replace lowercase command-line flags:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">TE</span></code> (for Terra flags)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">TM</span></code> (for Tendermint flags)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">BC</span></code> (for democli or basecli flags)</p></li>
</ul>
<p>For example, the environment variable <code class="docutils literal notranslate"><span class="pre">TE_CHAIN_ID</span></code> will map to the command line flag <code class="docutils literal notranslate"><span class="pre">--chain-id</span></code>. While explicit command-line flags will take precedence over environment variables, environment variables will take precedence over any of your configuration files. For this reason, it is imperative that you lock down your environment so that any critical parameters are defined as flags on the CLI, or that you prevent modification of any environment variables.</p>
</div>
</div>


           </div>
          </div>
          <footer class="footer">
  <p>
    

    <div class="extra_footer container">
      <div class="row">

        <div class="col">

          <div class="logos">
            <a href="https://discord.gg/terra-rebels" rel="noopener" target="_blank"><img src="/discord.svg" alt="link to Terra Rebels discord room"></a>&nbsp;
            <a href="https://medium.com/terra-money" rel="noopener" target="_blank"><img src="/medium.svg" alt="link to Terra medium"></a>&nbsp;
            <a href="https://twitter.com/terrarebels" rel="noopener" target="_blank"><img src="/twitter.svg" alt="link to Terra Rebels twitter"></a>&nbsp;
<!--             <a href="https://www.youtube.com/channel/UCoV1RXZ9ZBGcuu_PMTTlM0g" rel="noopener" target="_blank"><img src="/icon_youtube.png" alt="link to Terra youtube"></a>&nbsp; -->
            <a href="https://t.me/OfficialTerraRebels" rel="noopener" target="_blank"><img src="/icon_telegram.png" alt="link to Terra Rebels telegram room"></a>
            <br/><br/>
          </div>

        </div>

        <div class="col-md-auto">

          <a href="https://www.terrarebels.net/" >terrarebels.net</a> <br/>
          <a href="mailto:contact@terrarebels.net" >Contact</a> <br/>
          <br/>

        </div>

        <div class="col-md-auto">

          <a href="https://assets.website-files.com/611153e7af981472d8da199c/618b02d13e938ae1f8ad1e45_Terra_White_paper.pdf" >Whitepaper</a> <br/>
          <a href="https://certik.org/projects/terra" >Security Audit</a> <br/>
          <a href="https://agora.terrarebels.net/" >Agora forum</a> <br/>
          <br/>

        </div>

        <div class="col">
          <a href="https://finder.terra.money/" >Terra Finder</a> <br/>
          <a href="https://station.terrarebels.net/" >Rebel Station</a> <br/>
          <br/>

        </div>

      </div>
    </div>


  </p>

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>