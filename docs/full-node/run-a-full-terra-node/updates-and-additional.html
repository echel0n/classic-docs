<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Updates and additional settings &mdash; Terra Classic Docs  documentation</title>
      <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/tabs.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/panels-bootstrap.5fd3999ee7762ccc51105388f4a9d115.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/custom.css" type="text/css" />
    <link rel="shortcut icon" href="../../../_static/docs_favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script src="../../../_static/clipboard.min.js"></script>
        <script src="../../../_static/copybutton.js"></script>
        <script src="../../../_static/design-tabs.js"></script>
        <script src="../../../_static/custom.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Reset and troubleshooting" href="troubleshoot.html" />
    <link rel="prev" title="Sync" href="sync.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../../index.html">
            <img src="../../../_static/docs_logo.svg" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../learn/README.html">Learn</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../develop/README.html">Develop</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../README.html">Full node</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="README.html">Run a full Terra node </a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="README.html#contents">Contents </a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="system-config.html">System configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="build-terra-core.html">Build Terra core</a></li>
<li class="toctree-l4"><a class="reference internal" href="set-up-production.html">Set up a production environment</a></li>
<li class="toctree-l4"><a class="reference internal" href="set-up-production.html#run-the-server-as-a-daemon">Run the server as a daemon</a></li>
<li class="toctree-l4"><a class="reference internal" href="configure-general-settings.html">Configure general settings</a></li>
<li class="toctree-l4"><a class="reference internal" href="join-a-network.html">Join a network</a></li>
<li class="toctree-l4"><a class="reference internal" href="sync.html">Sync</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">Updates and additional settings</a></li>
<li class="toctree-l4"><a class="reference internal" href="troubleshoot.html">Reset and troubleshooting</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../manage-a-terra-validator/README.html">Manage a validator </a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/README.html">Node reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../develop/endpoints.html">RPC and LCD endpoints</a></li>
<li class="toctree-l2"><a class="reference internal" href="../resources.html">Full node resources</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../ecosystem/README.html">Ecosystem</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../spacecamp/README.html">Hackathon resources </a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Terra Classic Docs</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home"></a></li>
          <li class="breadcrumb-item"><a href="../README.html">Full node</a></li>
          <li class="breadcrumb-item"><a href="README.html">Run a full Terra node </a></li>
      <li class="breadcrumb-item active">Updates and additional settings</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../_sources/docs/full-node/run-a-full-terra-node/updates-and-additional.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="tex2jax_ignore mathjax_ignore section" id="updates-and-additional-settings">
<h1>Updates and additional settings<a class="headerlink" href="#updates-and-additional-settings" title="Permalink to this headline"></a></h1>
<div class="section" id="upgrade-the-testnet">
<h2>Upgrade the testnet<a class="headerlink" href="#upgrade-the-testnet" title="Permalink to this headline"></a></h2>
<p>These instructions are for full nodes running previous testnets that would like to upgrade to the latest testnet.</p>
<div class="section" id="reset-data">
<h3>1. Reset data<a class="headerlink" href="#reset-data" title="Permalink to this headline"></a></h3>
<p>Remove the outdated files and reset data:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>rm ~/.terra/config/genesis.json
rm ~/.terra/config/addrbook.json
terrad unsafe-reset-all
</pre></div>
</div>
<p>Your node is now in a pristine state, keeping the original <code class="docutils literal notranslate"><span class="pre">priv_validator.json</span></code> and <code class="docutils literal notranslate"><span class="pre">config.toml</span></code>. If you had any sentry nodes or full nodes set up before, your node will still try to connect to them but may fail if they haven’t also been upgraded.</p>
<div class="admonition danger">
<p class="admonition-title">Danger</p>
<p>Make sure that every node has a unique <code class="docutils literal notranslate"><span class="pre">priv_validator.json</span></code>. Do not copy the <code class="docutils literal notranslate"><span class="pre">priv_validator.json</span></code> from an old node to multiple new nodes. Running two nodes with the same <code class="docutils literal notranslate"><span class="pre">priv_validator.json</span></code> will cause you to double sign.</p>
</div>
</div>
<div class="section" id="software-upgrade">
<h3>2. Software upgrade<a class="headerlink" href="#software-upgrade" title="Permalink to this headline"></a></h3>
<p>Now it is time to upgrade the software. Go to the project directory and run:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git checkout master <span class="o">&amp;&amp;</span> git pull
make
</pre></div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>If you have issues at this step, please check that you have a compatible version of GO installed (v1.16.1-go1.17.1).</p>
</div>
<p>The previous command uses <code class="docutils literal notranslate"><span class="pre">master</span></code> as it contains the latest stable release. See the <a class="reference external" href="https://github.com/terra-money/testnet">testnet repo</a> for details on which version is needed for which testnet, and the <a class="reference external" href="https://github.com/terra-money/core/releases">Terra Core release page</a> for details on each release.</p>
<p>Your full node is now cleanly upgraded!</p>
</div>
</div>
<div class="section" id="exporting-state">
<h2>Exporting state<a class="headerlink" href="#exporting-state" title="Permalink to this headline"></a></h2>
<p>Terra can export the entire application state to a JSON file. You can use this file for manual analysis or as the genesis file of a new network.</p>
<p>Export state:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>terrad <span class="nb">export</span> &gt; <span class="o">[</span>filename<span class="o">]</span>.json
</pre></div>
</div>
<p>You can also export a state from a particular height. The following command will export the state after the block height you specify:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>terrad <span class="nb">export</span> --height <span class="o">[</span>height<span class="o">]</span> &gt; <span class="o">[</span>filename<span class="o">]</span>.json
</pre></div>
</div>
<p>If you plan to start a new network from the exported state, export with the <code class="docutils literal notranslate"><span class="pre">--for-zero-height</span></code> flag:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>terrad <span class="nb">export</span> --height <span class="o">[</span>height<span class="o">]</span> --for-zero-height &gt; <span class="o">[</span>filename<span class="o">]</span>.json
</pre></div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>For more information on seeds and peers, visit the <a class="reference external" href="https://github.com/tendermint/tendermint/blob/master/docs/tendermint-core/using-tendermint.md#peers">Tendermint documentation</a>.</p>
</div>
</div>
<div class="section" id="additional-settings">
<h2>Additional Settings<a class="headerlink" href="#additional-settings" title="Permalink to this headline"></a></h2>
<div class="section" id="seed-mode">
<h3><code class="docutils literal notranslate"><span class="pre">seed_mode</span></code><a class="headerlink" href="#seed-mode" title="Permalink to this headline"></a></h3>
<p>In seed mode, your node constantly crawls the network and looks for peers. If another node asks it for addresses, it responds and disconnects. Seed mode will not work if the peer-exchange reactor is disabled.</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="n">seed_mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="section" id="seeds">
<h3><code class="docutils literal notranslate"><span class="pre">seeds</span></code><a class="headerlink" href="#seeds" title="Permalink to this headline"></a></h3>
<p>To manually identify seed nodes, edit the following setting in <code class="docutils literal notranslate"><span class="pre">config.toml</span></code>.</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="c1"># Comma separated list of seed nodes to connect to</span><span class="w"></span>
<span class="n">seeds</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;id100000000000000000000000000000000@1.2.3.4:26656,id200000000000000000000000000000000@2.3.4.5:4444&quot;</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="section" id="persistent-peers">
<h3><code class="docutils literal notranslate"><span class="pre">persistent_peers</span></code><a class="headerlink" href="#persistent-peers" title="Permalink to this headline"></a></h3>
<p>The nodes you specify are the trusted persistent peers that can help anchor your node in the p2p network. If the connection fails, they are dialed and automatically redialed for 24 hours. The automatic redial function uses exponential backoff and stops after 24 hours of trying to connect.</p>
<p>If the value of <code class="docutils literal notranslate"><span class="pre">persistent_peers_max_dial_period</span></code> is more than zero, the pause between each call to each persistent peer will not exceed <code class="docutils literal notranslate"><span class="pre">persistent_peers_max_dial_period</span></code> during exponential backoff, and the automatic redial process continues.</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="c1"># Comma separated list of nodes to keep persistent connections to</span><span class="w"></span>
<span class="n">persistent_peers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;id100000000000000000000000000000000@1.2.3.4:26656,id200000000000000000000000000000000@2.3.4.5:26656&quot;</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="section" id="rosetta">
<h3>Rosetta<a class="headerlink" href="#rosetta" title="Permalink to this headline"></a></h3>
<p>Integrate Terra with Coinbase via the Rosetta API. Rosetta is an open-source API that organizes blockchain data into a standardized format, making it easy for developers to build cross-chain applications. Instead of creating specific code for each chain, Rosetta allows different blockchains to integrate into any exchange that uses Rosetta API.</p>
<p>For more information, visit the <a class="reference external" href="https://www.rosetta-api.org/docs/welcome.html">Rosetta docs site</a>.</p>
</div>
</div>
</div>


           </div>
          </div>
          <footer class="footer">
  <p>
    

    <div class="extra_footer container">
      <div class="row">

        <div class="col">

          <div class="logos">
            <a href="https://discord.gg/terra-rebels" rel="noopener" target="_blank"><img src="/discord.svg" alt="link to Terra Rebels discord room"></a>&nbsp;
            <a href="https://medium.com/terra-money" rel="noopener" target="_blank"><img src="/medium.svg" alt="link to Terra medium"></a>&nbsp;
            <a href="https://twitter.com/terrarebels" rel="noopener" target="_blank"><img src="/twitter.svg" alt="link to Terra Rebels twitter"></a>&nbsp;
<!--             <a href="https://www.youtube.com/channel/UCoV1RXZ9ZBGcuu_PMTTlM0g" rel="noopener" target="_blank"><img src="/icon_youtube.png" alt="link to Terra youtube"></a>&nbsp; -->
            <a href="https://t.me/OfficialTerraRebels" rel="noopener" target="_blank"><img src="/icon_telegram.png" alt="link to Terra Rebels telegram room"></a>
            <br/><br/>
          </div>

        </div>

        <div class="col-md-auto">

          <a href="https://www.terrarebels.net/" >terrarebels.net</a> <br/>
          <a href="mailto:contact@terrarebels.net" >Contact</a> <br/>
          <br/>

        </div>

        <div class="col-md-auto">

          <a href="https://assets.website-files.com/611153e7af981472d8da199c/618b02d13e938ae1f8ad1e45_Terra_White_paper.pdf" >Whitepaper</a> <br/>
          <a href="https://certik.org/projects/terra" >Security Audit</a> <br/>
          <a href="https://agora.terrarebels.net/" >Agora forum</a> <br/>
          <br/>

        </div>

        <div class="col">
          <a href="https://finder.terra.money/" >Terra Finder</a> <br/>
          <a href="https://station.terrarebels.net/" >Rebel Station</a> <br/>
          <br/>

        </div>

      </div>
    </div>


  </p>

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>