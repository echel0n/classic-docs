<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Keys &mdash; Terra Classic Docs  documentation</title>
      <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/tabs.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/panels-bootstrap.5fd3999ee7762ccc51105388f4a9d115.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/custom.css" type="text/css" />
    <link rel="shortcut icon" href="../../../../_static/docs_favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../../" id="documentation_options" src="../../../../_static/documentation_options.js"></script>
        <script src="../../../../_static/jquery.js"></script>
        <script src="../../../../_static/underscore.js"></script>
        <script src="../../../../_static/doctools.js"></script>
        <script src="../../../../_static/clipboard.min.js"></script>
        <script src="../../../../_static/copybutton.js"></script>
        <script src="../../../../_static/design-tabs.js"></script>
        <script src="../../../../_static/custom.js"></script>
    <script src="../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="next" title="Make a connection" href="make-a-connection.html" />
    <link rel="prev" title="IBC Transfers" href="ibc.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../../../index.html">
            <img src="../../../../_static/docs_logo.svg" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../learn/README.html">Learn</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../README.html">Develop</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../full-node/README.html">Full node</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../ecosystem/README.html">Ecosystem</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../../../spacecamp/README.html">Hackathon resources </a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../../learn/terra-station/README.html">Terra Station</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../dapp/quick-start/README.html">Terrain Quickstart</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../dapp/quick-start/using-terrain-localterra.html">Use Terrain with LocalTerra</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../dapp/quick-start/using-terrain-localterra.html#counter-tutorial">Counter tutorial</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../dapp/quick-start/using-terrain-testnet.html">Use Terrain with the testnet</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../dapp/quick-start/using-terrain-testnet.html#counter-tutorial">Counter tutorial</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../dapp/smart-contracts/README.html">In-depth dApp guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../endpoints.html">RPC and LCD endpoints</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../module-specifications/README.html">Terra Core modules </a></li>
<li class="toctree-l2 current"><a class="reference internal" href="README.html">Terra.js </a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="README.html#contents">Contents </a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="getting-started.html">Get started with Terra.js</a></li>
<li class="toctree-l4"><a class="reference internal" href="common-examples.html">Common examples</a></li>
<li class="toctree-l4"><a class="reference internal" href="add-modules.html">Add modules</a></li>
<li class="toctree-l4"><a class="reference internal" href="coin-and-coins.html">Coin and Coins</a></li>
<li class="toctree-l4"><a class="reference internal" href="fees.html">Fees</a></li>
<li class="toctree-l4"><a class="reference internal" href="ibc.html">IBC Transfers</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">Keys</a></li>
<li class="toctree-l4"><a class="reference internal" href="make-a-connection.html">Make a connection</a></li>
<li class="toctree-l4"><a class="reference internal" href="msgAuthorization.html">MsgAuthorization</a></li>
<li class="toctree-l4"><a class="reference internal" href="multisend.html">MsgSend</a></li>
<li class="toctree-l4"><a class="reference internal" href="numeric.html">Numeric</a></li>
<li class="toctree-l4"><a class="reference internal" href="oracle-feeder.html">Oracle feeder</a></li>
<li class="toctree-l4"><a class="reference internal" href="query-data.html">Query data</a></li>
<li class="toctree-l4"><a class="reference internal" href="smart-contracts.html">Smart contracts</a></li>
<li class="toctree-l4"><a class="reference internal" href="transactions.html">Transactions</a></li>
<li class="toctree-l4"><a class="reference internal" href="wallets.html">Wallets</a></li>
<li class="toctree-l4"><a class="reference internal" href="Websockets.html">Websockets</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference external" href="https://terra-money.github.io/terra.py/">Terra.py</a></li>
<li class="toctree-l2"><a class="reference external" href="https://faucet.terra.money/">Faucet</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../ecosystem/integrations.html">Block explorers</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">Terra Classic Docs</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../index.html" class="icon icon-home"></a></li>
          <li class="breadcrumb-item"><a href="../../README.html">Develop</a></li>
          <li class="breadcrumb-item"><a href="../README.html">SDKs</a></li>
          <li class="breadcrumb-item"><a href="README.html">Terra.js </a></li>
      <li class="breadcrumb-item active">Keys</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../../_sources/docs/develop/sdks/terra-js/keys.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="tex2jax_ignore mathjax_ignore section" id="keys">
<h1>Keys<a class="headerlink" href="#keys" title="Permalink to this headline"></a></h1>
<p>To perform actions using an account and private-public key pairs with Terra.js, you need an implementation of the <a class="reference external" href="https://github.com/terra-money/terra.js/blob/main/src/key/Key.ts"> <em>Key</em> </a> class, which provides an abstraction around the signing functions of an account. There are multiple implementations available:</p>
<p><a class="reference external" href="https://github.com/terra-money/terra.js/blob/main/src/key/RawKey.ts"> <em>RawKey</em> </a>
<a class="reference external" href="https://github.com/terra-money/terra.js/blob/main/src/key/MnemonicKey.ts"> <em>MnemonicKey</em> </a>
<a class="reference external" href="https://github.com/terra-money/terra.js/blob/main/src/key/CLIKey.ts"> <em>CLIKey</em> </a></p>
<p>You can also create a custom signing solution by extending the base <a class="reference external" href="https://github.com/terra-money/terra.js/blob/main/src/key/Key.ts"> <em>Key</em> </a> class.</p>
<div class="section" id="rawkey">
<h2><code class="docutils literal notranslate"><span class="pre">RawKey</span></code><a class="headerlink" href="#rawkey" title="Permalink to this headline"></a></h2>
<p>The most basic implementation of a <code class="docutils literal notranslate"><span class="pre">Key</span></code> is a <code class="docutils literal notranslate"><span class="pre">RawKey</span></code>, which is created using a plain private key. <code class="docutils literal notranslate"><span class="pre">RawKey</span></code>  wraps the 32 bytes of a private key and supplies a corresponding public key:</p>
<div class="highlight-ts notranslate"><div class="highlight"><pre><span></span><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">RawKey</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@terra-money/terra.js&#39;</span><span class="p">;</span><span class="w"></span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="nx">randomBytes</span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;crypto&#39;</span><span class="w"></span>
<span class="kd">let</span><span class="w"> </span><span class="nx">see</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">;</span><span class="w"></span>

<span class="kd">const</span><span class="w"> </span><span class="nx">raw_key</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">RawKey</span><span class="p">(</span><span class="nx">randomBytes</span><span class="p">(</span><span class="mf">32</span><span class="p">));</span><span class="w"></span>

<span class="nx">see</span><span class="p">(</span><span class="nx">raw_key</span><span class="p">.</span><span class="nx">publicKey</span><span class="p">)</span><span class="c1">//SimplePublicKey { key: &#39;AlNdglClnFJMwdeFGlfFTAwbx7rxKxWbgN/lwj5mQ3vw&#39; }</span><span class="w"></span>
<span class="nx">see</span><span class="p">(</span><span class="nx">raw_key</span><span class="p">.</span><span class="nx">privateKey</span><span class="p">)</span><span class="c1">//&lt;Buffer 53 e2 53 0b 29 c4 9d 54 b3 66 a4 61 7b d3 e2 6e 4c e5 41 cd 12 a6 e9 27 8a 97 61 1c 55 6e cd 4c&gt;</span><span class="w"></span>
<span class="nx">see</span><span class="p">(</span><span class="nx">raw_key</span><span class="p">.</span><span class="nx">accAddress</span><span class="p">)</span><span class="c1">//terra1ptj88nsljjr9agx07hahu6etv43acksy2q44sd</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="section" id="mnemonickey">
<h2><code class="docutils literal notranslate"><span class="pre">MnemonicKey</span></code><a class="headerlink" href="#mnemonickey" title="Permalink to this headline"></a></h2>
<p>A <code class="docutils literal notranslate"><span class="pre">MnemonicKey</span></code> derives itself from a 24-word  <a class="reference external" href="https://github.com/bitcoin/bips/blob/master/bip-0039.mediawiki"> BIP-39 </a> mnemonic as opposed to the bytes of a  private key.
A <code class="docutils literal notranslate"><span class="pre">MnemonicKey</span></code> has various levels of definition:</p>
<ul class="simple">
<li><p>Supply no arguments for the mnemonic to be randomly generated ( effectively generating a random key ).</p></li>
<li><p>Supply only a 24-word BIP-39 mnemonic to generate a corresponding key.</p></li>
<li><p>Supply a full HD path (using either a  random or particular mnenomic).</p></li>
</ul>
<div class="highlight-ts notranslate"><div class="highlight"><pre><span></span><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">MnemonicKey</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@terra-money/terra.js&#39;</span><span class="p">;</span><span class="w"></span>
<span class="kd">const</span><span class="w"> </span><span class="nx">see</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">;</span><span class="w"></span>

<span class="kd">const</span><span class="w"> </span><span class="nx">MNE_KEY_RANDOM</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">MnemonicKey</span><span class="p">();</span><span class="w"></span>

<span class="nx">see</span><span class="p">(</span><span class="nx">MNE_KEY_RANDOM</span><span class="p">.</span><span class="nx">mnemonic</span><span class="p">)</span><span class="w">  </span><span class="c1">// famous { ... } myth world size</span><span class="w"></span>
<span class="nx">see</span><span class="p">(</span><span class="nx">MNE_KEY_RANDOM</span><span class="p">.</span><span class="nx">privateKey</span><span class="p">)</span><span class="w"> </span><span class="c1">// &lt;Buffer 4f e5 { ... } 51 a4 41 9c&gt; </span><span class="w"></span>
<span class="nx">see</span><span class="p">(</span><span class="nx">MNE_KEY_RANDOM</span><span class="p">.</span><span class="nx">publicKey</span><span class="p">)</span><span class="w"> </span><span class="c1">// SimplePublicKey { key: &#39;A8TNSJhn6gGHgY2ohJnkOaZz7Y0FaW/QeytGBaqCLIJU&#39; }</span><span class="w"></span>
<span class="nx">see</span><span class="p">(</span><span class="nx">MNE_KEY_RANDOM</span><span class="p">.</span><span class="nx">accAddress</span><span class="p">)</span><span class="w"> </span><span class="c1">// terra1l63e8q7yjyd77qanwfgvl43ulagf34a2xzcuv4</span><span class="w"></span>


<span class="kd">const</span><span class="w"> </span><span class="nx">MNE_KEY_EXACT</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">MnemonicKey</span><span class="p">({</span><span class="w"></span>
<span class="w">  </span><span class="nx">mnemonic</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;squirrel future level fan world organ daring thing color orange sausage cross fault interest blast wink audit unfair satoshi solution track indoor sun edit&quot;</span><span class="p">,</span><span class="w"></span>
<span class="p">});</span><span class="w"></span>

<span class="kd">const</span><span class="w"> </span><span class="nx">MNE_KEY_RANDOM_WITH_HD_PATH</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">MnemonicKey</span><span class="p">({</span><span class="w"></span>
<span class="w">  </span><span class="c1">// mnemonic: &quot;&quot;,   // optional, will be random if not provided</span><span class="w"></span>
<span class="w">  </span><span class="nx">coinType</span><span class="o">:</span><span class="w"> </span><span class="kt">330</span><span class="p">,</span><span class="w">               </span><span class="c1">// optional, default</span><span class="w"></span>
<span class="w">  </span><span class="nx">account</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">0</span><span class="p">,</span><span class="w">                 </span><span class="c1">// optional, default</span><span class="w"></span>
<span class="w">  </span><span class="nx">index</span><span class="w">   </span><span class="o">:</span><span class="w"> </span><span class="kt">0</span><span class="p">,</span><span class="w">                 </span><span class="c1">// optional, default</span><span class="w"></span>
<span class="p">});</span><span class="w"></span>

<span class="kd">const</span><span class="w"> </span><span class="nx">MNE_KEY_FULLY_RESOLVED</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">MnemonicKey</span><span class="p">({</span><span class="w"></span>
<span class="w">  </span><span class="nx">mnemonic</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;squirrel future level fan world organ daring thing color orange sausage cross fault interest blast wink audit unfair satoshi solution track indoor sun edit&quot;</span><span class="p">,</span><span class="w">   </span>
<span class="w">  </span><span class="nx">coinType</span><span class="o">:</span><span class="w"> </span><span class="kt">330</span><span class="p">,</span><span class="w">               </span>
<span class="w">  </span><span class="nx">account</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">0</span><span class="p">,</span><span class="w">                 </span>
<span class="w">  </span><span class="nx">index</span><span class="w">   </span><span class="o">:</span><span class="w"> </span><span class="kt">0</span><span class="p">,</span><span class="w">                </span>
<span class="p">});</span><span class="w"></span>
</pre></div>
</div>
<div class="section" id="specifying-an-hd-path">
<h3>Specifying an HD path<a class="headerlink" href="#specifying-an-hd-path" title="Permalink to this headline"></a></h3>
<p><code class="docutils literal notranslate"><span class="pre">MnemonicKey</span></code> can used to recover a wallet with a particular BIP44 HD path: <code class="docutils literal notranslate"><span class="pre">m/44'/${coinType}'/${account}'/0/${index}</span></code>.</p>
<div class="tip admonition">
<p class="admonition-title">HD keys</p>
<p>As per <a class="reference external" href="https://github.com/confio/cosmos-hd-key-derivation-spec"> <em>Cosmos HD Key Derivation</em> </a>:</p>
<p>Cosmos blockchains support hierarchical deterministic key generation (HD keys) for deriving multiple cryptographic keypairs from a single secret value. This allows the user to use different keypairs for different accounts on one blockchain and create accounts on multiple blockchains without having to manage multiple secrets.</p>
</div>
<p>For example, to recover a mnemonic with the old Terra wallet HD path using coin type for ATOM (118):</p>
<div class="highlight-ts notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span><span class="w"> </span><span class="nx">mne_key</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">MnemonicKey</span><span class="p">({</span><span class="w"></span>
<span class="w">  </span><span class="nx">mnemonic</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;[ Your BIP39 mnemonic ]&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nx">coinType</span><span class="o">:</span><span class="w"> </span><span class="kt">118</span><span class="w">     </span><span class="c1">// &lt;--------- Cosmos&#39; coin type ( Terra had inherited initially )</span><span class="w"></span>
<span class="p">});</span><span class="w"></span>
</pre></div>
</div>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/bitcoin/bips/blob/master/bip-0039.mediawiki"> BIP-39 Mnemonics </a></p></li>
<li><p>Coin Types Numbers <code class="docutils literal notranslate"><span class="pre">330</span></code> and <code class="docutils literal notranslate"><span class="pre">118</span></code> above refer to “coin-types” for <code class="docutils literal notranslate"><span class="pre">Cosmos</span></code> and <code class="docutils literal notranslate"><span class="pre">Terra</span></code> blockchains accordingly. These numbers are defined according to the <a class="reference external" href="https://github.com/bitcoin/bips/blob/master/bip-0044.mediawiki"> BIP044 </a> standard. You can find more information <a class="reference external" href="https://github.com/satoshilabs/slips/blob/master/slip-0044.md"> here </a>.</p></li>
</ul>
</div>
</div>
<div class="section" id="custom-key-implementation">
<h2>Custom key implementation<a class="headerlink" href="#custom-key-implementation" title="Permalink to this headline"></a></h2>
<p>If you need to write your own key management solution, you will need to subclass the abstract <code class="docutils literal notranslate"><span class="pre">Key</span></code> class and provide your own signing function. Instead of exposing details pertaining to your private key, you can specify a <code class="docutils literal notranslate"><span class="pre">sign()</span></code> function that forwards the signing request to a server or to a hardware wallet. The remaining functions related to signing (<code class="docutils literal notranslate"><span class="pre">createSignature()</span></code> and <code class="docutils literal notranslate"><span class="pre">signTx()</span></code>) are automatically provided and use <code class="docutils literal notranslate"><span class="pre">sign()</span></code> underneath.</p>
<p>The following code listing is close to the implementation of <code class="docutils literal notranslate"><span class="pre">RawKey</span></code>, which illustrates how to write a custom <code class="docutils literal notranslate"><span class="pre">Key</span></code>:</p>
<div class="highlight-ts notranslate"><div class="highlight"><pre><span></span><span class="k">import</span><span class="w"> </span><span class="nx">SHA256</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;crypto-js/sha256&#39;</span><span class="p">;</span><span class="w"></span>
<span class="k">import</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="nx">secp256k1</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;secp256k1&#39;</span><span class="p">;</span><span class="w"></span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Key</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@terra-money/terra.js&#39;</span><span class="p">;</span><span class="w"></span>

<span class="cm">/**</span>
<span class="cm"> * An implementation of the Key interfaces that uses a raw private key.</span>
<span class="cm"> */</span><span class="w"></span>
<span class="k">export</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nx">NaiveCustomImplementation</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="nx">Key</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">  </span><span class="cm">/**</span>
<span class="cm">   * Raw private key, in bytes.</span>
<span class="cm">   */</span><span class="w"></span>
<span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="nx">privateKey</span><span class="o">:</span><span class="w"> </span><span class="kt">Buffer</span><span class="p">;</span><span class="w"></span>

<span class="w">  </span><span class="kr">constructor</span><span class="p">(</span><span class="nx">privateKey</span><span class="o">:</span><span class="w"> </span><span class="kt">Buffer</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">publicKey</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">secp256k1</span><span class="p">.</span><span class="nx">publicKeyCreate</span><span class="p">(</span><span class="w"></span>
<span class="w">      </span><span class="ow">new</span><span class="w"> </span><span class="nb">Uint8Array</span><span class="p">(</span><span class="nx">privateKey</span><span class="p">),</span><span class="w"></span>
<span class="w">      </span><span class="kc">true</span><span class="w"></span>
<span class="w">    </span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="k">super</span><span class="p">(</span><span class="ow">new</span><span class="w"> </span><span class="nx">SimplePublicKey</span><span class="p">(</span><span class="nx">Buffer</span><span class="p">.</span><span class="kr">from</span><span class="p">(</span><span class="nx">publicKey</span><span class="p">).</span><span class="nx">toString</span><span class="p">(</span><span class="s1">&#39;base64&#39;</span><span class="p">)));</span><span class="w"></span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">privateKey</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">privateKey</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>

<span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="nx">sign</span><span class="p">(</span><span class="nx">payload</span><span class="o">:</span><span class="w"> </span><span class="kt">Buffer</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nb">Promise</span><span class="o">&lt;</span><span class="nx">Buffer</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">hash</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">Buffer</span><span class="p">.</span><span class="kr">from</span><span class="p">(</span><span class="nx">SHA256</span><span class="p">(</span><span class="nx">payload</span><span class="p">.</span><span class="nx">toString</span><span class="p">()).</span><span class="nx">toString</span><span class="p">(),</span><span class="w"> </span><span class="s1">&#39;hex&#39;</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">signature</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">secp256k1</span><span class="p">.</span><span class="nx">ecdsaSign</span><span class="p">(</span><span class="w"></span>
<span class="w">      </span><span class="nb">Uint8Array</span><span class="p">.</span><span class="kr">from</span><span class="p">(</span><span class="nx">hash</span><span class="p">),</span><span class="w"></span>
<span class="w">      </span><span class="nb">Uint8Array</span><span class="p">.</span><span class="kr">from</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">privateKey</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nb">Promise</span><span class="p">(()=&gt;{</span><span class="nx">Buffer</span><span class="p">.</span><span class="kr">from</span><span class="p">(</span><span class="nx">signature</span><span class="p">)});</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p>Note that you must call <code class="docutils literal notranslate"><span class="pre">super()</span></code> with the public key to generate the relevant account and validator public keys associated with your key.</p>
</div>
</div>


           </div>
          </div>
          <footer class="footer">
  <p>
    

    <div class="extra_footer container">
      <div class="row">

        <div class="col">

          <div class="logos">
            <a href="https://discord.gg/terra-rebels" rel="noopener" target="_blank"><img src="/discord.svg" alt="link to Terra Rebels discord room"></a>&nbsp;
            <a href="https://medium.com/terra-money" rel="noopener" target="_blank"><img src="/medium.svg" alt="link to Terra medium"></a>&nbsp;
            <a href="https://twitter.com/terrarebels" rel="noopener" target="_blank"><img src="/twitter.svg" alt="link to Terra Rebels twitter"></a>&nbsp;
<!--             <a href="https://www.youtube.com/channel/UCoV1RXZ9ZBGcuu_PMTTlM0g" rel="noopener" target="_blank"><img src="/icon_youtube.png" alt="link to Terra youtube"></a>&nbsp; -->
            <a href="https://t.me/OfficialTerraRebels" rel="noopener" target="_blank"><img src="/icon_telegram.png" alt="link to Terra Rebels telegram room"></a>
            <br/><br/>
          </div>

        </div>

        <div class="col-md-auto">

          <a href="https://www.terrarebels.net/" >terrarebels.net</a> <br/>
          <a href="mailto:contact@terrarebels.net" >Contact</a> <br/>
          <br/>

        </div>

        <div class="col-md-auto">

          <a href="https://assets.website-files.com/611153e7af981472d8da199c/618b02d13e938ae1f8ad1e45_Terra_White_paper.pdf" >Whitepaper</a> <br/>
          <a href="https://certik.org/projects/terra" >Security Audit</a> <br/>
          <a href="https://agora.terrarebels.net/" >Agora forum</a> <br/>
          <br/>

        </div>

        <div class="col">
          <a href="https://finder.terra.money/" >Terra Finder</a> <br/>
          <a href="https://station.terrarebels.net/" >Rebel Station</a> <br/>
          <br/>

        </div>

      </div>
    </div>


  </p>

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>