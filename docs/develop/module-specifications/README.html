<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Terra Core modules &mdash; Terra Classic Docs  documentation</title>
      <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/tabs.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/panels-bootstrap.5fd3999ee7762ccc51105388f4a9d115.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/custom.css" type="text/css" />
    <link rel="shortcut icon" href="../../../_static/docs_favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script src="../../../_static/clipboard.min.js"></script>
        <script src="../../../_static/copybutton.js"></script>
        <script src="../../../_static/design-tabs.js"></script>
        <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
        <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
        <script src="../../../_static/custom.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Auth" href="spec-auth.html" />
    <link rel="prev" title="Open source contract comparison" href="../open-source.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../../index.html">
            <img src="../../../_static/docs_logo.svg" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../learn/README.html">Learn</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../README.html">Develop</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../full-node/README.html">Full node</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../ecosystem/README.html">Ecosystem</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../../spacecamp/README.html">Hackathon resources </a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../learn/terra-station/README.html">Terra Station</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dapp/quick-start/README.html">Terrain Quickstart</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dapp/quick-start/using-terrain-localterra.html">Use Terrain with LocalTerra</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dapp/quick-start/using-terrain-localterra.html#counter-tutorial">Counter tutorial</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dapp/quick-start/using-terrain-testnet.html">Use Terrain with the testnet</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dapp/quick-start/using-terrain-testnet.html#counter-tutorial">Counter tutorial</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dapp/smart-contracts/README.html">In-depth dApp guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../endpoints.html">RPC and LCD endpoints</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Terra Core modules </a><ul>
<li class="toctree-l3"><a class="reference internal" href="spec-auth.html">Auth</a></li>
<li class="toctree-l3"><a class="reference internal" href="spec-authz.html">AuthZ</a></li>
<li class="toctree-l3"><a class="reference internal" href="spec-bank.html">Bank</a></li>
<li class="toctree-l3"><a class="reference internal" href="spec-capability.html">Capability</a></li>
<li class="toctree-l3"><a class="reference internal" href="spec-distribution.html">Distribution</a></li>
<li class="toctree-l3"><a class="reference internal" href="spec-evidence.html">Evidence</a></li>
<li class="toctree-l3"><a class="reference internal" href="spec-feegrant.html">Fee grant</a></li>
<li class="toctree-l3"><a class="reference internal" href="spec-governance.html">Governance </a></li>
<li class="toctree-l3"><a class="reference internal" href="spec-market.html">Market </a></li>
<li class="toctree-l3"><a class="reference internal" href="spec-oracle.html">Oracle </a></li>
<li class="toctree-l3"><a class="reference internal" href="spec-slashing.html">Slashing</a></li>
<li class="toctree-l3"><a class="reference internal" href="spec-staking.html">Staking</a></li>
<li class="toctree-l3"><a class="reference internal" href="spec-treasury.html">Treasury</a></li>
<li class="toctree-l3"><a class="reference internal" href="spec-wasm.html">WASM</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-to-use-the-terra-core-module-specifications">How to use the Terra Core module specifications</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-architecture">Module architecture</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#inherited-modules">Inherited modules</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#block-lifecycle">Block lifecycle</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#begin-block">Begin block</a></li>
<li class="toctree-l4"><a class="reference internal" href="#process-messages">Process messages</a></li>
<li class="toctree-l4"><a class="reference internal" href="#end-block">End block</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#conventions">Conventions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#currency-denominations">Currency denominations</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../sdks/terra-js/README.html">Terra.js </a></li>
<li class="toctree-l2"><a class="reference external" href="https://terra-money.github.io/terra.py/">Terra.py</a></li>
<li class="toctree-l2"><a class="reference external" href="https://faucet.terra.money/">Faucet</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../ecosystem/integrations.html">Block explorers</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Terra Classic Docs</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home"></a></li>
          <li class="breadcrumb-item"><a href="../README.html">Develop</a></li>
      <li class="breadcrumb-item active">Terra Core modules </li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../_sources/docs/develop/module-specifications/README.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="tex2jax_ignore mathjax_ignore section" id="terra-core-modules">
<h1>Terra Core modules <img alt="../../../_images/icon_core.svg" height="40px" src="../../../_images/icon_core.svg" /><a class="headerlink" href="#terra-core-modules" title="Permalink to this headline"></a></h1>
<div class="toctree-wrapper compound">
</div>
<p>The Terra Core is the official Golang reference implementation of the Terra protocol.
The Terra Core is built using the <a class="reference external" href="https://cosmos.network/sdk">Cosmos SDK</a>, which provides a robust framework for blockchains that run atop the <a class="reference external" href="https://tendermint.com/">Tendermint</a> consensus protocol.</p>
<p>Before diving into the core modules, it may be useful to familiarize yourself with the <a class="reference external" href="https://docs.cosmos.network/">Cosmos</a> and <a class="reference external" href="https://docs.tendermint.com/master/tutorials/go.html">Tendermint</a> documentation.</p>
<div class="section" id="how-to-use-the-terra-core-module-specifications">
<h2>How to use the Terra Core module specifications<a class="headerlink" href="#how-to-use-the-terra-core-module-specifications" title="Permalink to this headline"></a></h2>
<p>Each module specification begins with a short description of the module’s main function within the architecture of the system and an explanation of how it contributes to implementing Terra’s features.</p>
<p>The body of each module specification provides a more detailed description of its main processes and algorithms alongside any concepts you might need to know. The body of each module specification also contains links to more granular information, such as specific state variables, message handlers, and other functions.</p>
<p>These specifications are not an exhaustive reference and are provided as a companion guide for users who need to work directly with the Terra Core codebase or understand it. Though all the important functions in each module are described, more trivial functions, such as getters and setters, are omitted for clarity. Module logic is also located in either the message handler or block transitions, such as begin-blocker and end-blocker.</p>
<p>The end of each module specification includes lists of various module parameters alongside their default values with a brief explanation of their purpose, associated events / tags, and errors issued by the module.</p>
</div>
<div class="section" id="module-architecture">
<h2>Module architecture<a class="headerlink" href="#module-architecture" title="Permalink to this headline"></a></h2>
<p>The Terra Core is organized into the following individual modules that implement different parts of the Terra protocol. They are listed in the order in which they are initialized during genesis:</p>
<ol class="arabic">
<li><p><code class="docutils literal notranslate"><span class="pre">genaccounts</span></code> - import &amp; export genesis account</p></li>
<li><p><a class="reference internal" href="spec-distribution.html"><span class="doc std std-doc"><code class="docutils literal notranslate"><span class="pre">distribution</span></code></span></a>: distribute rewards between validators and delegators</p>
<ul class="simple">
<li><p>reward distribution</p></li>
<li><p>community pool</p></li>
</ul>
</li>
<li><p><a class="reference internal" href="spec-staking.html"><span class="doc std std-doc"><code class="docutils literal notranslate"><span class="pre">staking</span></code></span></a>: validators and Luna</p></li>
<li><p><a class="reference internal" href="spec-auth.html"><span class="doc std std-doc"><code class="docutils literal notranslate"><span class="pre">auth</span></code></span></a>: ante handler</p>
<ul class="simple">
<li><p>vesting accounts</p></li>
</ul>
</li>
<li><p><a class="reference internal" href="spec-bank.html"><span class="doc std std-doc"><code class="docutils literal notranslate"><span class="pre">bank</span></code></span></a> - sending funds from account to account</p></li>
<li><p><a class="reference internal" href="spec-slashing.html"><span class="doc std std-doc"><code class="docutils literal notranslate"><span class="pre">slashing</span></code></span></a> - low-level Tendermint slashing (double-signing, etc)</p></li>
<li><p><a class="reference internal" href="spec-oracle.html"><span class="doc std std-doc"><code class="docutils literal notranslate"><span class="pre">oracle</span></code></span></a> - exchange rate feed oracle</p>
<ul class="simple">
<li><p>vote tallying weighted median</p></li>
<li><p>ballot rewards</p></li>
<li><p>slashing misbehaving oracles</p></li>
</ul>
</li>
<li><p><a class="reference internal" href="spec-treasury.html"><span class="doc std std-doc"><code class="docutils literal notranslate"><span class="pre">treasury</span></code></span></a>: miner incentive stabilization</p>
<ul class="simple">
<li><p>macroeconomic monitoring</p></li>
<li><p>monetary policy levers (Tax Rate, Reward Weight)</p></li>
<li><p>seigniorage settlement</p></li>
</ul>
<div class="warning admonition">
<p class="admonition-title">Note</p>
<p>As of proposals <a class="reference external" href="https://station.terra.money/proposal/43">43</a> and <a class="reference external" href="https://station.terra.money/proposal/172">172</a>, all seigniorage is burned, and the stability fee tax rate is zero.</p>
</div>
</li>
<li><p><a class="reference internal" href="spec-governance.html"><span class="doc std std-doc"><code class="docutils literal notranslate"><span class="pre">gov</span></code></span></a>: on-chain governance</p>
<ul class="simple">
<li><p>proposals</p></li>
<li><p>parameter updating</p></li>
</ul>
</li>
<li><p><a class="reference internal" href="spec-market.html"><span class="doc std std-doc"><code class="docutils literal notranslate"><span class="pre">market</span></code></span></a>: price-stabilization</p>
<ul class="simple">
<li><p>Terra&lt;&gt;Terra spot-conversion, Tobin Tax</p></li>
<li><p>Terra&lt;&gt;Luna market-maker, Constant-Product spread</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">crisis</span></code> - reports consensus failure state with proof to halt the chain</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">genutil</span></code> - handles <code class="docutils literal notranslate"><span class="pre">gentx</span></code> commands</p>
<ul class="simple">
<li><p>filter and handle <code class="docutils literal notranslate"><span class="pre">MsgCreateValidator</span></code> messages</p></li>
</ul>
</li>
</ol>
<div class="section" id="inherited-modules">
<h3>Inherited modules<a class="headerlink" href="#inherited-modules" title="Permalink to this headline"></a></h3>
<p>Many of the modules in Terra Core inherit from the Cosmos SDK and are configured to work with Terra through customization in either genesis parameters or by augmenting their functionality with additional code.</p>
</div>
</div>
<div class="section" id="block-lifecycle">
<h2>Block lifecycle<a class="headerlink" href="#block-lifecycle" title="Permalink to this headline"></a></h2>
<p>The following processes are executed during each block transition:</p>
<div class="section" id="begin-block">
<h3>Begin block<a class="headerlink" href="#begin-block" title="Permalink to this headline"></a></h3>
<ol class="arabic simple">
<li><p>Distribution: Issuance of rewards for the previous block.</p></li>
<li><p>Slashing: Checking of infraction evidence or downtime of validators for double-signing and downtime penalties.</p></li>
</ol>
</div>
<div class="section" id="process-messages">
<h3>Process messages<a class="headerlink" href="#process-messages" title="Permalink to this headline"></a></h3>
<ol class="arabic simple" start="3">
<li><p>Messages are routed to their appropriate modules and then processed by the appropriate message handlers.</p></li>
</ol>
</div>
<div class="section" id="end-block">
<h3>End block<a class="headerlink" href="#end-block" title="Permalink to this headline"></a></h3>
<ol class="arabic" start="4">
<li><p>Crisis: Check all registered invariants and assert that they remain true.</p></li>
<li><p>Oracle</p>
<ul class="simple">
<li><p>If at the end of <code class="docutils literal notranslate"><span class="pre">VotePeriod</span></code>, run <a class="reference internal" href="spec-oracle.html#voting-procedure"><span class="std std-doc">voting procedure</span></a> and update Luna exchange rate.</p></li>
<li><p>If at the end of <code class="docutils literal notranslate"><span class="pre">SlashWindow</span></code>, penalize validators who <a class="reference internal" href="spec-slashing.html"><span class="doc std std-doc">missed</span></a> more <code class="docutils literal notranslate"><span class="pre">VotePeriod</span></code>s than permitted.</p></li>
</ul>
</li>
<li><p>Governance: Remove inactive proposals, check active proposals whose voting periods have ended for passes, and run the registered proposal handler of the passed proposal.</p></li>
<li><p>Market: <a class="reference internal" href="spec-market.html#end-block"><span class="std std-doc">Replenish</span></a> liquidity pools, allowing spread fees to decrease.</p></li>
<li><p>Treasury: At the end of every <code class="docutils literal notranslate"><span class="pre">epoch</span></code>, update indicators, burn seigniorage, and recalibrate monetary policy levers (tax-rate, reward-weight) for the next epoch.</p>
<div class="warning admonition">
<p class="admonition-title">Note</p>
<p>As of proposals <a class="reference external" href="https://station.terra.money/proposal/43">43</a> and <a class="reference external" href="https://station.terra.money/proposal/172">172</a>, all seigniorage is burned, and the stability fee tax rate is zero.</p>
</div>
</li>
<li><p>Staking: The new set of active validators is determined from the top 130 Luna stakers. Validators that lose their spot within the set start the unbonding process.</p></li>
</ol>
</div>
</div>
<div class="section" id="conventions">
<h2>Conventions<a class="headerlink" href="#conventions" title="Permalink to this headline"></a></h2>
<div class="section" id="currency-denominations">
<h3>Currency denominations<a class="headerlink" href="#currency-denominations" title="Permalink to this headline"></a></h3>
<p>Two types of tokens can be held by accounts and wallets in the Terra protocol:</p>
<ul>
<li><p>Terra stablecoins, which track the exchange rate of various fiat currencies. Each Terra stablecoin is named for its corresponding three-letter <a class="reference external" href="https://www.xe.com/iso4217.php">ISO 4217 fiat currency code</a>, written as <code class="docutils literal notranslate"><span class="pre">Terra&lt;currencycode&gt;</span></code>. When used as a value, the last letter of each currency code abbreviation is replaced with T to signify it as a Terra stablecoin. For example, the Terra stablecoin pegged to the Korean Won, KRW, is named  TerraKRW, and its abbreviation is KRT.</p>
<p>The Terra protocol’s standard base currency is TerraSDR, or SDT, which pegs to the IMF’s Special Drawing Rights. The Terra protocol uses SDT to make calculations and set rate standards.</p>
</li>
<li><p>Luna, which is the Terra protocol’s native staking asset. Delegators earn mining rewards when they stake their Luna to an active validator. Luna stabilizes the Terra economy by absorbing the price volatility of Terra stablecoins and is also used to make governance proposals.</p></li>
</ul>
<p>The microunit (<span class="math notranslate nohighlight">\(\times 10^{-6}\)</span>) is the smallest atomic unit of both Terra stablecoins and Luna.</p>
<p>Below are some examples of the different Terra stablecoins:</p>
<table class="colwidths-auto docutils align-default">
<thead>
<tr class="row-odd"><th class="text-left head"><p>Denomination</p></th>
<th class="text-left head"><p>Micro-Unit</p></th>
<th class="text-left head"><p>Code</p></th>
<th class="text-left head"><p>Value</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p>Luna</p></td>
<td class="text-left"><p>µLuna</p></td>
<td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">uluna</span></code></p></td>
<td class="text-left"><p>0.000001 Luna</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>TerraSDR</p></td>
<td class="text-left"><p>µSDR</p></td>
<td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">usdr</span></code></p></td>
<td class="text-left"><p>0.000001 SDT</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>TerraKRW</p></td>
<td class="text-left"><p>µKRW</p></td>
<td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">ukrw</span></code></p></td>
<td class="text-left"><p>0.000001 KRT</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>TerraUSD</p></td>
<td class="text-left"><p>µUSD</p></td>
<td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">uusd</span></code></p></td>
<td class="text-left"><p>0.000001 UST</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>TerraMNT</p></td>
<td class="text-left"><p>µMNT</p></td>
<td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">umnt</span></code></p></td>
<td class="text-left"><p>0.000001 MNT</p></td>
</tr>
</tbody>
</table>
<p>The Terra protocol is able to set prices for each stablecoin denomination through the use of external price oracles in the <a class="reference internal" href="spec-oracle.html"><span class="doc std std-doc">oracle module</span></a>. Validators vote on the off-chain prices of Luna relative to each stablecoin’s real-world fiat counterpart. The weighted medians of the submitted exchange rates are used to set the exchange rates of Luna and Terra stablecoins used by the <a class="reference internal" href="spec-market.html"><span class="doc std std-doc">market module</span></a>. Because rates are set using an external price oracle, the market module is always able to swap stablecoins using current, real-world prices. The oracle also ensures that you can always trade $1 worth of Luna for 1 UST, and vice versa, regardless of the off-chain price of UST. Utilizing the market module exchange rates, arbitrageurs are incentivized to trade any off-peg Terra stablecoin on any external market, profiting from the price difference while simultaneously driving prices to match their fiat peg.</p>
</div>
</div>
</div>


           </div>
          </div>
          <footer class="footer">
  <p>
    

    <div class="extra_footer container">
      <div class="row">

        <div class="col">

          <div class="logos">
            <a href="https://discord.gg/terra-rebels" rel="noopener" target="_blank"><img src="/discord.svg" alt="link to Terra Rebels discord room"></a>&nbsp;
            <a href="https://medium.com/terra-money" rel="noopener" target="_blank"><img src="/medium.svg" alt="link to Terra medium"></a>&nbsp;
            <a href="https://twitter.com/terrarebels" rel="noopener" target="_blank"><img src="/twitter.svg" alt="link to Terra Rebels twitter"></a>&nbsp;
<!--             <a href="https://www.youtube.com/channel/UCoV1RXZ9ZBGcuu_PMTTlM0g" rel="noopener" target="_blank"><img src="/icon_youtube.png" alt="link to Terra youtube"></a>&nbsp; -->
            <a href="https://t.me/OfficialTerraRebels" rel="noopener" target="_blank"><img src="/icon_telegram.png" alt="link to Terra Rebels telegram room"></a>
            <br/><br/>
          </div>

        </div>

        <div class="col-md-auto">

          <a href="https://www.terrarebels.net/" >terrarebels.net</a> <br/>
          <a href="mailto:contact@terrarebels.net" >Contact</a> <br/>
          <br/>

        </div>

        <div class="col-md-auto">

          <a href="https://assets.website-files.com/611153e7af981472d8da199c/618b02d13e938ae1f8ad1e45_Terra_White_paper.pdf" >Whitepaper</a> <br/>
          <a href="https://certik.org/projects/terra" >Security Audit</a> <br/>
          <a href="https://agora.terrarebels.net/" >Agora forum</a> <br/>
          <br/>

        </div>

        <div class="col">
          <a href="https://finder.terra.money/" >Terra Finder</a> <br/>
          <a href="https://station.terrarebels.net/" >Rebel Station</a> <br/>
          <br/>

        </div>

      </div>
    </div>


  </p>

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>