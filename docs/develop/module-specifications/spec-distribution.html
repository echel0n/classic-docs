
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Distribution &#8212; Terra Classic Docs  documentation</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../../../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../../../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/tabs.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/panels-bootstrap.5fd3999ee7762ccc51105388f4a9d115.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/custom.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/clipboard.min.js"></script>
    <script src="../../../_static/copybutton.js"></script>
    <script src="../../../_static/design-tabs.js"></script>
    <script src="../../../_static/custom.js"></script>
    <link rel="shortcut icon" href="../../../_static/docs_favicon.ico"/>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Evidence" href="spec-evidence.html" />
    <link rel="prev" title="Capability" href="spec-capability.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
    
    <div class="container-fluid" id="banner"></div>

    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="container-xl">

  <div id="navbar-start">
    
    

<a class="navbar-brand" href="../../../index.html">
  <img src="../../../_static/docs_logo.svg" class="logo" alt="logo">
</a>


    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  
  <div id="navbar-collapsible" class="col-lg-9 collapse navbar-collapse">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <ul id="navbar-main-elements" class="navbar-nav">
    <li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../learn/README.html">
  Learn
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../README.html">
  Develop
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../full-node/README.html">
  Full node
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../ecosystem/README.html">
  Ecosystem
 </a>
</li>

<li class="toctree-l1 current active nav-item">
 <a class="reference internal nav-link" href="../../spacecamp/README.html">
  Hackathon resources
 </a>
</li>

    
</ul>
      </div>
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
      </ul>
      </div>
      
    </div>
  </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
            
            <!-- Only show if we have sidebars configured, else just a small margin  -->
            <div class="col-12 col-md-3 bd-sidebar">
              <div class="sidebar-start-items"><form class="bd-search d-flex align-items-center" action="../../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    <ul class="current nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../learn/terra-station/README.html">
   Terra Station
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../../learn/terra-station/download/README.html">
     Download
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
    <label for="toctree-checkbox-2">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../../learn/terra-station/download/terra-station-desktop.html">
       Terra Station desktop
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../learn/terra-station/download/terra-station-extension.html">
       Terra Station Chrome extension
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../learn/terra-station/download/terra-station-mobile.html">
       Terra Station mobile
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../learn/terra-station/wallet.html">
     Wallet
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../learn/terra-station/send.html">
     Send
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../learn/terra-station/staking.html">
     Manage Staking
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../learn/terra-station/swap.html">
     Mint, burn, or swap
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../learn/terra-station/governance.html">
     Governance
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../learn/terra-station/wormhole.html">
     Wormhole Bridge tutorial
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../learn/terra-station/multisig.html">
     Multisig wallets
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../learn/terra-station/contracts.html">
     Contract
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../learn/terra-station/testnet.html">
     Testnet
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../learn/terra-station/keplr.html">
     Connect your Station Wallet to Keplr
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../dapp/quick-start/README.html">
   Terrain Quickstart
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
  <label for="toctree-checkbox-3">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../dapp/quick-start/initial-setup.html">
     Terrain initial setup
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../dapp/quick-start/using-terrain-testnet.html">
     Use Terrain with the testnet
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../dapp/quick-start/using-terrain-localterra.html">
     Use Terrain with LocalTerra
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../dapp/quick-start/mint-an-nft.html">
     Mint an NFT using Terrain
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../dapp/quick-start/contract-migration.html">
     Migrating CosmWasm contracts on Terra
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../dapp/quick-start/cw20-factory.html">
     Build a CW20 tokens factory
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../dapp/quick-start/using-terrain-localterra.html">
   Use Terrain with LocalTerra
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../dapp/quick-start/using-terrain-testnet.html">
   Use Terrain with the testnet
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../dapp/smart-contracts/README.html">
   In-depth dApp guide
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
  <label for="toctree-checkbox-4">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../dapp/smart-contracts/build-terra-dapp.html">
     Build a simple Terra dApp
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../dapp/smart-contracts/set-up-local-environment.html">
     Environment Setup
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../dapp/smart-contracts/write-smart-contract.html">
     Writing the Contract
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../dapp/smart-contracts/interact-with-smart-contract.html">
     Interacting with the Contract
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../dapp/smart-contracts/manage-cw20-tokens.html">
     CW20 Tokens
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../endpoints.html">
   RPC and LCD endpoints
  </a>
 </li>
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="README.html">
   Terra Core modules
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/>
  <label for="toctree-checkbox-5">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2">
    <a class="reference internal" href="spec-auth.html">
     Auth
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="spec-authz.html">
     AuthZ
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="spec-bank.html">
     Bank
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="spec-capability.html">
     Capability
    </a>
   </li>
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     Distribution
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="spec-evidence.html">
     Evidence
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="spec-feegrant.html">
     Fee grant
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="spec-governance.html">
     Governance
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="spec-market.html">
     Market
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="spec-oracle.html">
     Oracle
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="spec-slashing.html">
     Slashing
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="spec-staking.html">
     Staking
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="spec-treasury.html">
     Treasury
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="spec-wasm.html">
     WASM
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../sdks/terra-js/README.html">
   Terra.js
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/>
  <label for="toctree-checkbox-6">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../sdks/terra-js/getting-started.html">
     Get started with Terra.js
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../sdks/terra-js/common-examples.html">
     Common examples
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../sdks/terra-js/add-modules.html">
     Add modules
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../sdks/terra-js/coin-and-coins.html">
     Coin and Coins
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../sdks/terra-js/fees.html">
     Fees
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../sdks/terra-js/ibc.html">
     IBC Transfers
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../sdks/terra-js/keys.html">
     Keys
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../sdks/terra-js/make-a-connection.html">
     Make a connection
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../sdks/terra-js/msgAuthorization.html">
     MsgAuthorization
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../sdks/terra-js/multisend.html">
     MsgSend
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../sdks/terra-js/numeric.html">
     Numeric
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../sdks/terra-js/oracle-feeder.html">
     Oracle feeder
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../sdks/terra-js/query-data.html">
     Query data
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../sdks/terra-js/smart-contracts.html">
     Smart contracts
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../sdks/terra-js/transactions.html">
     Transactions
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../sdks/terra-js/wallets.html">
     Wallets
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../sdks/terra-js/Websockets.html">
     Websockets
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference external" href="https://terra-money.github.io/terra.py/">
   Terra.py
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference external" href="https://faucet.terra.money/">
   Faucet
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../ecosystem/integrations.html">
   Block explorers
  </a>
 </li>
</ul>

  </div>
</nav>
              </div>
              <div class="sidebar-end-items">
              </div>
            </div>
            
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
            
              
              <div class="toc-item">
                
<div class="tocsection onthispage mt-5 pt-1 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#concepts">
   Concepts
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#validator-and-delegator-rewards">
     Validator and delegator rewards
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#community-pool">
     Community pool
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#state">
   State
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#feepool">
     FeePool
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#validator-distribution">
     Validator distribution
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#delegation-distribution">
     Delegation distribution
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#message-types">
   Message types
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#msgsetwithdrawaddress">
     MsgSetWithdrawAddress
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#msgwithdrawdelegatorreward">
     MsgWithdrawDelegatorReward
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#msgwithdrawvalidatorcommission">
     MsgWithdrawValidatorCommission
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#msgfundcommunitypool">
     MsgFundCommunityPool
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#proposals">
   Proposals
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#communitypoolspendproposal">
     CommunityPoolSpendProposal
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#transitions">
   Transitions
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#begin-block">
     Begin-Block
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#parameters">
   Parameters
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#communitytax">
     CommunityTax
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#baseproposerreward">
     BaseProposerReward
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#bonusproposerreward">
     BonusProposerReward
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#withdrawaddrenabled">
     WithdrawAddrEnabled
    </a>
   </li>
  </ul>
 </li>
</ul>

</nav>
              </div>
              
              <div class="toc-item">
                
              </div>
              
            
          </div>
          

          
          
            
          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <div class="tex2jax_ignore mathjax_ignore section" id="distribution">
<h1>Distribution<a class="headerlink" href="#distribution" title="Permalink to this headline">#</a></h1>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Terra’s distribution module inherits from Cosmos SDK’s <a class="reference external" href="https://docs.cosmos.network/master/modules/distribution/"><code class="docutils literal notranslate"><span class="pre">distribution</span></code></a> module. This document is a stub and covers mainly important Terra-specific notes about how it is used.</p>
</div>
<p>The distribution module describes a mechanism that tracks collected fees and passively distributes them to validators and delegators. Additionally, the distribution module defines the <a class="reference internal" href="#community-pool"><span class="std std-doc">community pool</span></a>, which is a pool of funds under the control of on-chain governance.</p>
<div class="section" id="concepts">
<h2>Concepts<a class="headerlink" href="#concepts" title="Permalink to this headline">#</a></h2>
<div class="section" id="validator-and-delegator-rewards">
<h3>Validator and delegator rewards<a class="headerlink" href="#validator-and-delegator-rewards" title="Permalink to this headline">#</a></h3>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Passive distribution means that validators and delegators need to manually collect their fee rewards by <a class="reference internal" href="../how-to/terrad/subcommands.html#tx-distribution-withdraw-rewards"><span class="std std-doc">submitting withdrawal transactions</span></a>.</p>
</div>
<p>Collected rewards are pooled globally and distrubuted to validators and delegators. Each validator has the opportunity to charge delegators commission on the rewards collected on behalf of the delegators. Fees are collected directly into a global reward pool and a validator proposer-reward pool. Due to the nature of passive accounting, whenever changes to parameters which affect the rate of reward distribution occur, withdrawal of rewards must also occur.</p>
</div>
<div class="section" id="community-pool">
<h3>Community pool<a class="headerlink" href="#community-pool" title="Permalink to this headline">#</a></h3>
<p>The community pool is a reserve of tokens designated for funding projects that promote further adoption and stimulate growth for the Terra economy. The comminuty pool used to be funded by seigniorage. As of Columbus-5, all seigniorage is burned, and the community pool no longer receives funding.</p>
</div>
</div>
<div class="section" id="state">
<h2>State<a class="headerlink" href="#state" title="Permalink to this headline">#</a></h2>
<blockquote>
<div><p>This section was taken from the official Cosmos SDK docs, and placed here for your convenience to understand the distribution module’s parameters and genesis variables.</p>
</div></blockquote>
<div class="section" id="feepool">
<h3>FeePool<a class="headerlink" href="#feepool" title="Permalink to this headline">#</a></h3>
<p>All globally tracked parameters for distribution are stored within
<code class="docutils literal notranslate"><span class="pre">FeePool</span></code>. Rewards are collected and added to the reward pool and
distributed to validators/delegators from here.</p>
<p>Note that the reward pool holds decimal coins (<code class="docutils literal notranslate"><span class="pre">DecCoins</span></code>) to allow
for fractions of coins to be received from operations like inflation.
When coins are distributed from the pool they are truncated back to
<code class="docutils literal notranslate"><span class="pre">sdk.Coins</span></code> which are non-decimal.</p>
</div>
<div class="section" id="validator-distribution">
<h3>Validator distribution<a class="headerlink" href="#validator-distribution" title="Permalink to this headline">#</a></h3>
<p>The following validator distribution information for the relevant validator is updated each time:</p>
<ul class="simple">
<li><p>Delegation amount to a validator is updated,</p></li>
<li><p>A validator successfully proposes a block and receives a reward.</p></li>
<li><p>Any delegator withdraws from a validator or the validator withdraws its commission.</p></li>
</ul>
</div>
<div class="section" id="delegation-distribution">
<h3>Delegation distribution<a class="headerlink" href="#delegation-distribution" title="Permalink to this headline">#</a></h3>
<p>Each delegation distribution only needs to record the height at which it last
withdrew fees. Because a delegation must withdraw fees each time its
properties change (aka bonded tokens etc.), its properties will remain constant
and the delegator’s accumulation factor can be calculated passively knowing
only the height of the last withdrawal and its current properties.</p>
</div>
</div>
<div class="section" id="message-types">
<h2>Message types<a class="headerlink" href="#message-types" title="Permalink to this headline">#</a></h2>
<div class="section" id="msgsetwithdrawaddress">
<h3>MsgSetWithdrawAddress<a class="headerlink" href="#msgsetwithdrawaddress" title="Permalink to this headline">#</a></h3>
<div class="highlight-go notranslate"><div class="highlight"><pre><span></span><span class="kd">type</span><span class="w"> </span><span class="nx">MsgSetWithdrawAddress</span><span class="w"> </span><span class="kd">struct</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">	</span><span class="nx">DelegatorAddress</span><span class="w"> </span><span class="nx">sdk</span><span class="p">.</span><span class="nx">AccAddress</span><span class="w"> </span><span class="s">`json:&quot;delegator_address&quot; yaml:&quot;delegator_address&quot;`</span><span class="w"></span>
<span class="w">	</span><span class="nx">WithdrawAddress</span><span class="w">  </span><span class="nx">sdk</span><span class="p">.</span><span class="nx">AccAddress</span><span class="w"> </span><span class="s">`json:&quot;withdraw_address&quot; yaml:&quot;withdraw_address&quot;`</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="section" id="msgwithdrawdelegatorreward">
<h3>MsgWithdrawDelegatorReward<a class="headerlink" href="#msgwithdrawdelegatorreward" title="Permalink to this headline">#</a></h3>
<div class="highlight-go notranslate"><div class="highlight"><pre><span></span><span class="c1">// msg struct for delegation withdraw from a single validator</span><span class="w"></span>
<span class="kd">type</span><span class="w"> </span><span class="nx">MsgWithdrawDelegatorReward</span><span class="w"> </span><span class="kd">struct</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">	</span><span class="nx">DelegatorAddress</span><span class="w"> </span><span class="nx">sdk</span><span class="p">.</span><span class="nx">AccAddress</span><span class="w"> </span><span class="s">`json:&quot;delegator_address&quot; yaml:&quot;delegator_address&quot;`</span><span class="w"></span>
<span class="w">	</span><span class="nx">ValidatorAddress</span><span class="w"> </span><span class="nx">sdk</span><span class="p">.</span><span class="nx">ValAddress</span><span class="w"> </span><span class="s">`json:&quot;validator_address&quot; yaml:&quot;validator_address&quot;`</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="section" id="msgwithdrawvalidatorcommission">
<h3>MsgWithdrawValidatorCommission<a class="headerlink" href="#msgwithdrawvalidatorcommission" title="Permalink to this headline">#</a></h3>
<div class="highlight-go notranslate"><div class="highlight"><pre><span></span><span class="kd">type</span><span class="w"> </span><span class="nx">MsgWithdrawValidatorCommission</span><span class="w"> </span><span class="kd">struct</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">	</span><span class="nx">ValidatorAddress</span><span class="w"> </span><span class="nx">sdk</span><span class="p">.</span><span class="nx">ValAddress</span><span class="w"> </span><span class="s">`json:&quot;validator_address&quot; yaml:&quot;validator_address&quot;`</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="section" id="msgfundcommunitypool">
<h3>MsgFundCommunityPool<a class="headerlink" href="#msgfundcommunitypool" title="Permalink to this headline">#</a></h3>
<div class="highlight-go notranslate"><div class="highlight"><pre><span></span><span class="kd">type</span><span class="w"> </span><span class="nx">MsgFundCommunityPool</span><span class="w"> </span><span class="kd">struct</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">	</span><span class="nx">Amount</span><span class="w">    </span><span class="nx">sdk</span><span class="p">.</span><span class="nx">Coins</span><span class="w">      </span><span class="s">`json:&quot;amount&quot; yaml:&quot;amount&quot;`</span><span class="w"></span>
<span class="w">	</span><span class="nx">Depositor</span><span class="w"> </span><span class="nx">sdk</span><span class="p">.</span><span class="nx">AccAddress</span><span class="w"> </span><span class="s">`json:&quot;depositor&quot; yaml:&quot;depositor&quot;`</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="proposals">
<h2>Proposals<a class="headerlink" href="#proposals" title="Permalink to this headline">#</a></h2>
<div class="section" id="communitypoolspendproposal">
<h3>CommunityPoolSpendProposal<a class="headerlink" href="#communitypoolspendproposal" title="Permalink to this headline">#</a></h3>
<p>The distribution module defines a special proposal that, upon being passed, disburses the coins specified in <code class="docutils literal notranslate"><span class="pre">Amount</span></code> to the <code class="docutils literal notranslate"><span class="pre">Recipient</span></code> account using funds from the community pool.</p>
<div class="highlight-go notranslate"><div class="highlight"><pre><span></span><span class="kd">type</span><span class="w"> </span><span class="nx">CommunityPoolSpendProposal</span><span class="w"> </span><span class="kd">struct</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">	</span><span class="nx">Title</span><span class="w">       </span><span class="kt">string</span><span class="w">         </span><span class="s">`json:&quot;title&quot; yaml:&quot;title&quot;`</span><span class="w"></span>
<span class="w">	</span><span class="nx">Description</span><span class="w"> </span><span class="kt">string</span><span class="w">         </span><span class="s">`json:&quot;description&quot; yaml:&quot;description&quot;`</span><span class="w"></span>
<span class="w">	</span><span class="nx">Recipient</span><span class="w">   </span><span class="nx">sdk</span><span class="p">.</span><span class="nx">AccAddress</span><span class="w"> </span><span class="s">`json:&quot;recipient&quot; yaml:&quot;recipient&quot;`</span><span class="w"></span>
<span class="w">	</span><span class="nx">Amount</span><span class="w">      </span><span class="nx">sdk</span><span class="p">.</span><span class="nx">Coins</span><span class="w">      </span><span class="s">`json:&quot;amount&quot; yaml:&quot;amount&quot;`</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="transitions">
<h2>Transitions<a class="headerlink" href="#transitions" title="Permalink to this headline">#</a></h2>
<div class="section" id="begin-block">
<h3>Begin-Block<a class="headerlink" href="#begin-block" title="Permalink to this headline">#</a></h3>
<blockquote>
<div><p>This section derives from the official Cosmos SDK docs, and is placed here for your convenience to understand the distribution module’s parameters.</p>
</div></blockquote>
<p>At the beginning of each block, the distribution module will set the proposer for determining distribution during endblock and distribute rewards for the previous block.</p>
<p>The fees received are transferred to the Distribution <code class="docutils literal notranslate"><span class="pre">ModuleAccount</span></code>, which tracks the flow of coins in and out of the module. Fees are also allocated to the proposer, community fund, and global pool:</p>
<ul class="simple">
<li><p>Proposer: When a validator is the proposer of a round, that validator and its delegators receive 1-5% of the fee rewards.</p></li>
<li><p>Community fund: The reserve community tax is charged and distributed to the community pool. As of Columbus-5, this tax is no longer charged and the community pool no longer receives funding.</p></li>
<li><p>Global pool: The remainder of the funds is allocated to the global pool, where they are distributed proportionally by voting power to all bonded validators independent of whether they voted. This allocation is called social distribution. Social distribution is applied to the proposer validator in addition to the proposer reward.</p></li>
</ul>
<p>The proposer reward is calculated from precommits Tendermint messages to incentivize validators to wait and include additional precommits in the block. All provision rewards are added to a provision reward pool, which each validator holds individually (<code class="docutils literal notranslate"><span class="pre">ValidatorDistribution.ProvisionsRewardPool</span></code>).</p>
<div class="highlight-go notranslate"><div class="highlight"><pre><span></span><span class="kd">func</span><span class="w"> </span><span class="nx">AllocateTokens</span><span class="p">(</span><span class="nx">feesCollected</span><span class="w"> </span><span class="nx">sdk</span><span class="p">.</span><span class="nx">Coins</span><span class="p">,</span><span class="w"> </span><span class="nx">feePool</span><span class="w"> </span><span class="nx">FeePool</span><span class="p">,</span><span class="w"> </span><span class="nx">proposer</span><span class="w"> </span><span class="nx">ValidatorDistribution</span><span class="p">,</span><span class="w"></span>
<span class="w">              </span><span class="nx">sumPowerPrecommitValidators</span><span class="p">,</span><span class="w"> </span><span class="nx">totalBondedTokens</span><span class="p">,</span><span class="w"> </span><span class="nx">communityTax</span><span class="p">,</span><span class="w"></span>
<span class="w">              </span><span class="nx">proposerCommissionRate</span><span class="w"> </span><span class="nx">sdk</span><span class="p">.</span><span class="nx">Dec</span><span class="p">)</span><span class="w"></span>

<span class="w">     </span><span class="nx">SendCoins</span><span class="p">(</span><span class="nx">FeeCollectorAddr</span><span class="p">,</span><span class="w"> </span><span class="nx">DistributionModuleAccAddr</span><span class="p">,</span><span class="w"> </span><span class="nx">feesCollected</span><span class="p">)</span><span class="w"></span>
<span class="w">     </span><span class="nx">feesCollectedDec</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">MakeDecCoins</span><span class="p">(</span><span class="nx">feesCollected</span><span class="p">)</span><span class="w"></span>
<span class="w">     </span><span class="nx">proposerReward</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">feesCollectedDec</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="mf">0.01</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">0.04</span><span class="w"></span>
<span class="w">                       </span><span class="o">*</span><span class="w"> </span><span class="nx">sumPowerPrecommitValidators</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="nx">totalBondedTokens</span><span class="p">)</span><span class="w"></span>

<span class="w">     </span><span class="nx">commission</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">proposerReward</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nx">proposerCommissionRate</span><span class="w"></span>
<span class="w">     </span><span class="nx">proposer</span><span class="p">.</span><span class="nx">PoolCommission</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="nx">commission</span><span class="w"></span>
<span class="w">     </span><span class="nx">proposer</span><span class="p">.</span><span class="nx">Pool</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="nx">proposerReward</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nx">commission</span><span class="w"></span>

<span class="w">     </span><span class="nx">communityFunding</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">feesCollectedDec</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nx">communityTax</span><span class="w"></span>
<span class="w">     </span><span class="nx">feePool</span><span class="p">.</span><span class="nx">CommunityFund</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="nx">communityFunding</span><span class="w"></span>

<span class="w">     </span><span class="nx">poolReceived</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">feesCollectedDec</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nx">proposerReward</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nx">communityFunding</span><span class="w"></span>
<span class="w">     </span><span class="nx">feePool</span><span class="p">.</span><span class="nx">Pool</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="nx">poolReceived</span><span class="w"></span>

<span class="w">     </span><span class="nx">SetValidatorDistribution</span><span class="p">(</span><span class="nx">proposer</span><span class="p">)</span><span class="w"></span>
<span class="w">     </span><span class="nx">SetFeePool</span><span class="p">(</span><span class="nx">feePool</span><span class="p">)</span><span class="w"></span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="parameters">
<h2>Parameters<a class="headerlink" href="#parameters" title="Permalink to this headline">#</a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>On June 15, 2022, the Terra community passed <a class="reference external" href="https://station.terra.money/proposal/4080">governance proposal 4080</a> which changed the following parameters via a parameter proposal:  “CommunityTax”:“0.5”; “BaseProposerReward”:“0.03”; “BonusProposerReward”:“0.12”.  You may find it interesting to also look at the Cosmos <a class="reference external" href="https://docs.cosmos.network/v0.44/modules/distribution/03_begin_block.html#reward-to-the-community-pool">distribution</a> module documentation regarding these parameters.</p>
</div>
<p>The subspace for the distribution module is <code class="docutils literal notranslate"><span class="pre">distribution</span></code>.</p>
<div class="highlight-go notranslate"><div class="highlight"><pre><span></span><span class="kd">type</span><span class="w"> </span><span class="nx">GenesisState</span><span class="w"> </span><span class="kd">struct</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">	</span><span class="o">...</span><span class="w"></span>
<span class="w">	</span><span class="nx">CommunityTax</span><span class="w">        </span><span class="nx">sdk</span><span class="p">.</span><span class="nx">Dec</span><span class="w"> </span><span class="s">`json:&quot;community_tax&quot; yaml:&quot;community_tax&quot;`</span><span class="w"></span>
<span class="w">	</span><span class="nx">BaseProposerReward</span><span class="w">	</span><span class="nx">sdk</span><span class="p">.</span><span class="nx">Dec</span><span class="w"> </span><span class="s">`json:&quot;base_proposer_reward&quot; yaml:&quot;base_proposer_reward&quot;`</span><span class="w"></span>
<span class="w">	</span><span class="nx">BonusProposerReward</span><span class="w">	</span><span class="nx">sdk</span><span class="p">.</span><span class="nx">Dec</span><span class="w">	</span><span class="s">`json:&quot;bonus_proposer_reward&quot; yaml:&quot;bonus_proposer_reward&quot;`</span><span class="w"></span>
<span class="w">	</span><span class="nx">WithdrawAddrEnabled</span><span class="w"> </span><span class="kt">bool</span><span class="w"> 	</span><span class="s">`json:&quot;withdraw_addr_enabled&quot;`</span><span class="w"></span>
<span class="w">	</span><span class="o">...</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<div class="section" id="communitytax">
<h3>CommunityTax<a class="headerlink" href="#communitytax" title="Permalink to this headline">#</a></h3>
<ul class="simple">
<li><p>type: <code class="docutils literal notranslate"><span class="pre">Dec</span></code></p></li>
</ul>
</div>
<div class="section" id="baseproposerreward">
<h3>BaseProposerReward<a class="headerlink" href="#baseproposerreward" title="Permalink to this headline">#</a></h3>
<ul class="simple">
<li><p>type: <code class="docutils literal notranslate"><span class="pre">Dec</span></code></p></li>
</ul>
</div>
<div class="section" id="bonusproposerreward">
<h3>BonusProposerReward<a class="headerlink" href="#bonusproposerreward" title="Permalink to this headline">#</a></h3>
<ul class="simple">
<li><p>type: <code class="docutils literal notranslate"><span class="pre">Dec</span></code></p></li>
</ul>
</div>
<div class="section" id="withdrawaddrenabled">
<h3>WithdrawAddrEnabled<a class="headerlink" href="#withdrawaddrenabled" title="Permalink to this headline">#</a></h3>
<ul class="simple">
<li><p>type: <code class="docutils literal notranslate"><span class="pre">bool</span></code></p></li>
</ul>
</div>
</div>
</div>


              </div>
              
              
              



<div class='prev-next-bottom'>
    
    <div id="prev">
        <a class="left-prev" href="spec-capability.html" title="previous page">
            <i class="prevnext-label fas fa-angle-left"></i>
            <div class="prevnext-info">
                <p class="prevnext-label">previous</p>
                <p class="prevnext-title">Capability</p>
            </div>
        </a>
    </div>
     <div id="next">
        <a class="right-next" href="spec-evidence.html" title="next page">
            <div class="prevnext-info">
                <p class="prevnext-label">next</p>
                <p class="prevnext-title">Evidence</p>
            </div>
            <i class="prevnext-label fas fa-angle-right"></i>
        </a>
     </div>

</div>
              
          </main>
          

      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>
<footer class="footer">
  <p>
    

    <div class="extra_footer container">
      <div class="row">

        <div class="col">

          <div class="logos">
            <a href="https://discord.gg/terra-rebels" rel="noopener" target="_blank"><img src="/discord.svg" alt="link to Terra Rebels discord room"></a>&nbsp;
            <a href="https://medium.com/terra-money" rel="noopener" target="_blank"><img src="/medium.svg" alt="link to Terra medium"></a>&nbsp;
            <a href="https://twitter.com/terrarebels" rel="noopener" target="_blank"><img src="/twitter.svg" alt="link to Terra Rebels twitter"></a>&nbsp;
<!--             <a href="https://www.youtube.com/channel/UCoV1RXZ9ZBGcuu_PMTTlM0g" rel="noopener" target="_blank"><img src="/icon_youtube.png" alt="link to Terra youtube"></a>&nbsp; -->
            <a href="https://t.me/OfficialTerraRebels" rel="noopener" target="_blank"><img src="/icon_telegram.png" alt="link to Terra Rebels telegram room"></a>
            <br/><br/>
          </div>

        </div>

        <div class="col-md-auto">

          <a href="https://www.terrarebels.net/" >terrarebels.net</a> <br/>
          <a href="mailto:contact@terrarebels.net" >Contact</a> <br/>
          <br/>

        </div>

        <div class="col-md-auto">

          <a href="https://assets.website-files.com/611153e7af981472d8da199c/618b02d13e938ae1f8ad1e45_Terra_White_paper.pdf" >Whitepaper</a> <br/>
          <a href="https://certik.org/projects/terra" >Security Audit</a> <br/>
          <a href="https://agora.terrarebels.net/" >Agora forum</a> <br/>
          <br/>

        </div>

        <div class="col">
          <a href="https://finder.terra.money/" >Terra Finder</a> <br/>
          <a href="https://station.terrarebels.net/" >Rebel Station</a> <br/>
          <br/>

        </div>

      </div>
    </div>


  </p>

</footer>
  </body>
</html>